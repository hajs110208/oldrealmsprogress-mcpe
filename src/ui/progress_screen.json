{
  "namespace": "progress",

  "realms_loading_background": {
    "type": "panel",
    "controls": [
      {
        "portal@common.portal_background": {
          "layer": 1
        }
      }
    ]
  },

  "realms_loading_world_modal_progress_screen_content": {
    "type": "panel",
    "controls": [
      {
        "center_content_stack": {
          "type": "stack_panel",
          "anchor_from": "center",
          "anchor_to": "center",
          "size": [ "100%", "100%c" ],
          "controls": [
            {
              "dynamic_title_label": {
                "type": "label",
                "text": "realmJoining.progressTitle",
                "size": [ "100%", "default" ],
                "text_alignment": "center",
                "color": [ 1.0, 1.0, 1.0 ],
                "shadow": true,
                "layer": 10,
                "bindings": [
                  { "binding_name": "#title_text" },
                  { 
                    "binding_name": "#loading_bar_visible", 
                    "binding_name_override": "#visible" 
                  }
                ]
              }
            },
            // add some padding cuz the texts are too close together
            {
              "padding_title_text": {
                "type": "panel",
                "size": [ 0, 13 ]
              }
            },
            {
            // Changed the progress text label to match older join screen
              "progress_text_label": {
                "type": "label",
                "text": "progressScreen.message.genericMayTakeAMoment",
                "size": [ "100%", "default" ],
                "text_alignment": "center",
                "color": [ 1.0, 1.0, 1.0 ],
                "shadow": true,
                "layer": 10,
                "bindings": [
                  { 
                    "binding_name": "(not #server_region_connected_visible)", 
                    "binding_name_override": "#visible" 
                  }
                ]
              }
            },
            {
            //building terrain label. Not really accurate.
              "buildingterrain_label": {
                "type": "label",
                "text": "menu.generatingTerrain",
                "size": [ "100%", "default" ],
                "text_alignment": "center",
                "color": [ 1.0, 1.0, 1.0 ],
                "shadow": true,
                "layer": 10,
                "bindings": [
                  { "binding_name": "(not #loading_bar_visible)", 
                    "binding_name_override": "#ignored"
                  },
                  { 
                    "binding_name": "#server_region_connected_visible", 
                    "binding_name_override": "#visible" 
                  }
                ]
              }
            },
            {
            //done label just like opening worlds
              "done_label": {
                "type": "label",
                "text": "progressScreen.message.done",
                "size": [ "100%", "default" ],
                "text_alignment": "center",
                "color": [ 1.0, 1.0, 1.0 ],
                "shadow": true,
                "layer": 10,
                "bindings": [
                  { 
                    "binding_name": "(not #loading_bar_visible)", 
                    "binding_name_override": "#visible" 
                  }
                ]
              }
            },
            //padding for animation bar
            {
              "padding_small": { 
                "type": "panel", 
                "size": [ 0, 15 ]
              }
            },
            {
              "animation_panel": {
                "type": "panel",
                "size": [ "100%", 8 ],
                "bindings": [
                  { 
                    "binding_name": "#loading_bar_visible", 
                    "binding_name_override": "#visible" 
                  }
                ],
                "controls": [
                  {
                    "segmented_anim": {
                      "type": "image",
                      "texture": "textures/ui/loading_bar",
                      "size": [ 64, 8 ],
                      "uv_size": [ 64, 8 ],
                      "color": [ 0.8, 0.8, 0.8 ],
                      "uv": "@progress.bar_animation",
                      "layer": 10,
                      "anchor_from": "center",
                      "anchor_to": "center"
                    }
                  }
                ]
              }
            },
            {
              "padding_large": { "type": "panel", "size": [ 0, 24 ] }
            },
            {
            //cancel button. idk if it works or not
              "button_panel": {
                "type": "panel",
                "size": [ "100%", 26 ],
                "controls": [
                  {
                    "cancel_button@common_buttons.light_text_button": {
                      "size": [ 100, 26 ],
                      "$button_text": "gui.cancel",
                      "anchor_from": "center",
                      "anchor_to": "center",
                      "layer": 10,
                      "$pressed_button_name": "button.menu_exit",
                      "bindings": [
                        {
                          "binding_name": "#cancel_visible",
                          "binding_name_override": "#visible"
                        }
                      ]
                    }
                  }
                ]
              }
            }
          ]
        }
      },
      { 
        "popup_dialog_factory@progress.popup_dialog_factory": {} 
      }
    ]
  }
}

